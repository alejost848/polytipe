<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../iron-icons/iron-icons.html">

<dom-module id="poly-button">

  <style>
    :host {
      display: inline-block;
    }
    paper-button{
      background-color: var(--app-accent-color);
      color: #fff;
      margin: 0;
    }
    paper-button.disabled{
      background-color: #ddd;
    }
  </style>

  <template>

    <paper-button disabled="{{disabled}}" raised="{{raised}}">
      <template is="dom-if" if="{{hasIcon}}">
        <iron-icon icon="{{icon}}"></iron-icon>
      </template>
      {{text}}
    </paper-button>
  </template>
  <script>
    Polymer({
      is: 'poly-button',
      listeners: {
        'tap': 'focus'
      },
      properties:{
        text:{
          type: String,
          value: "Bot√≥n"
        },
        icon:{
          type: String,
          value: "android",
          observer: "_iconChanged"
        },
        raised:{
          type: Boolean,
          value: true
        }
      },
      ready: function () {
        this._focused = false;
      },
      focus: function(event) {
        if(!this.focused){
          this.fire("elementSelection");
          this.toggleClass('outlined_element', true);
          event.stopPropagation();
        }
        this._focused = true;
      },
      unfocus: function() {
        this.toggleClass('outlined_element', false);
        this._focused = false;
      },
      _iconChanged: function() {
        //Show or hide the icon depending on the input
        if(this.icon){
          this.hasIcon = true;
        }else{
          this.hasIcon = false;
        }
      }
    });
  </script>
</dom-module>
